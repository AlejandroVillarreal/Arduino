/*COPIA DE PROGRAMA INTERACCION TECLADO DISPLAY */
#include <Keypad.h>
#include "U8glib.h"

U8GLIB_ST7920_128X64_1X u8g(52, 51, 53, U8G_PIN_NONE);

const byte Fila = 4;
const byte Columna = 4;
char keys[Fila][Columna] = {
  {'1', '2', '3', 'A'},
  {'4', '5', '6', 'B'},
  {'7', '8', '9', 'C'},
  {'*', '0', '#', 'D'}
};
byte FilaPins[Fila] = {5, 4, 3, 2};
byte ColumnaPins[Columna] = {8, 7, 6, 9};


Keypad keypad = Keypad( makeKeymap(keys), FilaPins, ColumnaPins, Fila, Columna );

void u8g_prepare(void) {
  u8g.setFont(u8g_font_5x7);
  u8g.setFontRefHeightExtendedText();
  u8g.setDefaultForegroundColor();
  u8g.setFontPosTop();
}
void Inicio(uint8_t a) {
  u8g.drawStr( 5, 0, "!!Bienvenidos!! ");
  u8g.drawStr( 5, 15, "Esto es ");
  u8g.drawStr( 5, 30, "Metodos");
  u8g.drawStr( 5, 55, "Numericos ");

}
void UnidadTematica (uint8_t a) {

  u8g.drawStr( 7, 0, "Unidad Tematica #: ");
  u8g.drawStr( 0, 10, "1)Interpol.Y Sol ENL.");
  u8g.drawStr( 0, 20, "2)Sol.Ec.Lin.Y AjustCurva");
  u8g.drawStr( 0, 30, "3)Dif.E IntegNumerica ");
  u8g.drawStr( 0, 40, "4)ED. Ordinaria");


}
void Unidad1(uint8_t a) {
  u8g.drawStr( 5, 0,   "Unidad Tematica I:");
  u8g.drawStr( 00, 10, "Interpolacion y  ");
  u8g.drawStr( 00, 25, "Solucion de");
  u8g.drawStr( 00, 35, " Ecuaciones no");
  u8g.drawStr( 00, 45, " Lineales");
}
void Unidad11(uint8_t a) {
  u8g.drawStr( 5, 0,   "Secion #: ");
  u8g.drawStr( 00, 10, "1)Interpolacion");
  u8g.drawStr( 00, 30, "2)Solucion de ");
  u8g.drawStr( 00, 45, " Ecuaciones no");
  u8g.drawStr( 00, 55, " Lineales");
}



void Unidad2(uint8_t a) {
  u8g.drawStr( 5, 0,  "Unidad Tematica II:  ");
  u8g.drawStr( 00, 10, "Solicion  De");
  u8g.drawStr( 00, 25, "Ecuaciones Lineales y");
  u8g.drawStr( 00, 35, "Ajuste de Curvas");
}
void Unidad21(uint8_t a) {
  u8g.drawStr( 5, 0,   "Secion #: ");
  u8g.drawStr( 00, 10, "3)Sol. Ec. Lin.");
  u8g.drawStr( 00, 30, "4)Minimos  ");
  u8g.drawStr( 00, 45, " Cuadrados");
}



void Unidad3(uint8_t a) {
  u8g.drawStr( 5, 0,   "Unidad Tematica III:");
  u8g.drawStr( 00, 10, "Diferenciacion");
  u8g.drawStr( 00, 25, " e integracions");
  u8g.drawStr( 00, 35, " Numerica ");
}
void Unidad31(uint8_t a) {
  u8g.drawStr( 5, 0,   "Secion #: ");
  u8g.drawStr( 00, 10, "3)Sol. Ec. Lin.");
  u8g.drawStr( 00, 30, "4)Minimos  ");
  u8g.drawStr( 00, 45, " Cuadrados");
}



void Unidad4(uint8_t a) {
  u8g.drawStr( 5, 0,   "Unidad Tematica IV:");
  u8g.drawStr( 00, 10, "Ecuacuines   ");
  u8g.drawStr( 00, 25, "Diferenciales");
  u8g.drawStr( 00, 35, "Ordinarias");
}
void Unidad41(uint8_t a) {
  u8g.drawStr( 5, 0,   "Secion #: ");
  u8g.drawStr( 00, 15, "4)Integracion");
  u8g.drawStr( 00, 25, "5)Ecuaciones ");
  u8g.drawStr( 00, 35, "Diferenciales ");
  u8g.drawStr( 00, 45, "Ordinarias ");
}



uint8_t draw_state = 0;

void draw(void) {
  u8g_prepare();
  switch (draw_state) {
    case 0: Inicio(draw_state);         break;
    case 1: UnidadTematica(draw_state); break;
    case 2: Unidad1(draw_state);        break;
    case 3: Unidad11(draw_state);      break;
    // case 4:Unidad1.1.1(draw_state&7);      break;
    case 4: Unidad2(draw_state);        break;
    case 5: Unidad21(draw_state);      break;
    // case 9:Unidad2.1.1(draw_state&7);      break;
    case 6: Unidad3(draw_state);      break;
    case 7: Unidad31(draw_state);      break;
    // case 11:Unidad3.1.1(draw_state&7); break;
    case 8: Unidad4(draw_state);      break;
    case 9: Unidad41(draw_state);        break;
      // case 8:Unidad4.1.1(draw_state&7);      break;
      // case 9:Unidad2.3.1(draw_state&7);      break;
      //case 10:Unidad2.4(draw_state&7);      break;
      // case 11:Unidad2.4.1(draw_state&7); break;
      // case 6:Unidad3(draw_state&7);        break;
      // case 7:Unidad4(draw_state&7);        break;

  }
}



void setup(void) {
  {
    Serial.begin(9600);
  }

  pinMode(8, OUTPUT);

#if defined(ARDUINO)
  pinMode(13, OUTPUT);
  digitalWrite(13, HIGH);
#endif
}

void loop() {


  char key = keypad.getKey();
  if (key == '1') {
    Serial.println( "Key");
    
    u8g.firstPage();

    //Primera paguina
    do {
      draw();
    }
    while ( u8g.nextPage() );
    // increase the state
    draw_state++;
    if ( draw_state ==10 )
      draw_state = 0;
    // rebuild the picture after some delay
    //delay(900);

  }


}
